{{/* Local override: show authors + pub type; hide date for working papers (type "3") */}}

{{ $isWorking := false }}
{{ with .Params.publication_types }}
  {{ if and (ge (len .) 1) (eq (index . 0) "3") }}
    {{ $isWorking = true }}
  {{ end }}
{{ end }}

<div class="article-metadata">
  {{/* Authors */}}
  {{ with .Params.authors }}
    <span class="article-authors">{{ delimit . ", " }}</span>
  {{ end }}

  {{/* Publication type label (optional) */}}
  {{ $ptype := "" }}
  {{ with .Params.publication_types }}
    {{ if ge (len .) 1 }}
      {{ $code := index . 0 }}
      {{ if eq $code "1" }}{{ $ptype = "Conference paper" }}{{ end }}
      {{ if eq $code "2" }}{{ $ptype = "Journal article" }}{{ end }}
      {{ if eq $code "3" }}{{ $ptype = "Working paper" }}{{ end }}
      {{ if eq $code "4" }}{{ $ptype = "Report" }}{{ end }}
      {{ if eq $code "5" }}{{ $ptype = "Book" }}{{ end }}
      {{ if eq $code "6" }}{{ $ptype = "Book section" }}{{ end }}
      {{ if eq $code "7" }}{{ $ptype = "Thesis" }}{{ end }}
      {{ if eq $code "8" }}{{ $ptype = "Patent" }}{{ end }}
    {{ end }}
  {{ end }}
  {{ if $ptype }}
    <span class="article-badge"> — {{ $ptype }}</span>
  {{ end }}

  {{/* Date (hidden for working papers) */}}
  {{ if not $isWorking }}
    {{ with .Date }}
      <span class="article-date"> — {{ . | time.Format "Jan 2006" }}</span>
    {{ end }}
  {{ end }}
</div>
